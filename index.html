<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JasanGPT</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
  </head>
  <body>
    <main>
        <h1>Welcome to My Website</h1>
        <form id="message-form">
          <input type="text" id="message-input" placeholder="Type your message here">
          <button type="submit">Send</button>
        </form>
        <div id="chat-log">
          <!-- Chat log will be appended here -->
        </div>  
    </main>
    <script>
      const chatLog = document.getElementById('chat-log');
      const messageInput = document.getElementById('message-input');
      const messageForm = document.getElementById('message-form');

      messageForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const userMessage = messageInput.value;
        messageInput.value = '';
        const messageElement = document.createElement('div');
        messageElement.classList.add('message');
        messageElement.classList.add('message--sent');
        messageElement.innerHTML = `
          <div class="message__content">
            ${userMessage}
          </div>
        `;
        chatLog.appenChild(messageElement);
        chatLog.scrollTop = chatLog.scrollHeight;
        fetch('http://localhost:3000', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ message: userMessage })
        });
        .then(res.json())
        .then(data => {
          const messageElement = document.createElement('div');
          messageElement.classList.add('message');
          messageElement.classList.add('message--received');
          messageElement.innerHTML = `
            <div class="message__content">
              ${data.complition.content}
            </div>
          `;
          chatLog.appendChild(messageElement);
          chatLog.scrollTop = chatLog.scrollHeight;
        });
      });
    </script>
  </body>
</html>